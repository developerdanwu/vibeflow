# Frontend Source Code Guide

## Structure

```
src/
├── routes/           # TanStack Router file-based routes
├── components/       # React components
│   ├── ui/          # shadcn/ui primitives (29 components)
│   ├── big-calendar/ # Full calendar feature module
│   ├── layouts/     # Page layout wrappers
│   └── dialogs/     # Global dialog components
├── hooks/           # Custom React hooks
├── lib/             # Utilities and helpers
├── integrations/    # External service setup (TanStack Query)
├── data/            # Static/demo data
├── styles/          # Additional CSS (calendar.css)
└── test/            # Test setup
```

## Key Patterns

### Routing
- File-based routing via TanStack Router
- `__root.tsx` - Root layout with devtools
- `_authenticated.tsx` - Auth-protected layout wrapper
- `_authenticated/*.tsx` - Protected routes (e.g., `calendar.tsx`)

### Components
- **UI primitives** (`components/ui/`): shadcn/ui components, use `pnpm dlx shadcn@latest add [name]` to add new ones
- **Feature modules** (`components/big-calendar/`): Self-contained with own contexts, hooks, stores, and types
- **Layouts**: Wrap routes with consistent structure

### State Management
- **Server state**: TanStack Query + Convex
- **Client state**: XState Store (`big-calendar/store/calendarStore.ts`)
- **Context**: React Context for component trees (`big-calendar/contexts/`)

### Styling
- Tailwind CSS v4
- Use `cn()` from `lib/utils.ts` for conditional classes
- Component variants via `class-variance-authority`

## Do Not Edit

- `styles.css` - Generated by Tailwind
- `routeTree.gen.ts` - Generated by TanStack Router

## Adding New Code

| Type | Location | Convention |
|------|----------|------------|
| Page | `routes/` | `kebab-case.tsx` |
| Component | `components/` | `PascalCase.tsx` |
| Hook | `hooks/` | `use-kebab-case.ts` |
| Utility | `lib/` | `camelCase.ts` |

## Calendar Module

The `big-calendar/` module is the main feature. Key files:

- `types.ts` - Core types (`TCalendarView`, `TEventColor`, etc.)
- `interfaces.ts` - Event and calendar interfaces
- `schemas.ts` - Zod validation schemas
- `contexts/calendar-context.tsx` - Calendar state provider
- `store/calendarStore.ts` - XState store for UI state
- `hooks/` - `use-add-event`, `use-delete-event`, `use-update-event`

### Views
- `month-view/` - Month grid with day cells and event badges
- `week-and-day-view/` - Time-based views with event blocks
- `year-view/` - Year overview
- `agenda-view/` - List-style event view

### Features
- `dnd/` - Drag and drop (react-dnd)
- `dialogs/` - Add/edit/details event dialogs
- `header/` - Navigation and view controls
